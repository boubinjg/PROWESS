{"version":3,"file":"index.umd.development.js","sources":["../node_modules/dequal/lite/index.mjs","../src/shared.ts","../src/hooks/useLatest.ts","../src/utils/arrayToMap.ts","../src/utils/isFileList.ts","../src/utils/isObject.ts","../src/utils/cloneObject.ts","../src/utils/compact.ts","../src/utils/isPlainObject.ts","../src/utils/deepMerge.ts","../src/utils/isUndefined.ts","../src/utils/filterErrors.ts","../src/utils/stringToPath.ts","../src/utils/get.ts","../src/utils/getIsDirty.ts","../src/utils/invariant.ts","../src/utils/isFunction.ts","../src/utils/isAsyncFunction.ts","../src/utils/isCheckboxInput.ts","../src/utils/isEmptyObject.ts","../src/utils/isFieldElement.ts","../src/utils/isFileInput.ts","../src/utils/isInputElement.ts","../src/utils/isNumberInput.ts","../src/utils/isRadioInput.ts","../src/utils/isRangeInput.ts","../src/utils/isSelectMultiple.ts","../src/utils/isSelectOne.ts","../src/utils/runWithLowPriority.ts","../src/utils/set.ts","../src/utils/unset.ts","../src/utils/warn.ts","../src/hooks/useState.ts","../src/useForm.ts","../src/useFormMethods.ts","../src/useFormState.ts","../src/useControlled.ts"],"sourcesContent":["var has = Object.prototype.hasOwnProperty;\n\nexport function dequal(foo, bar) {\n\tvar ctor, len;\n\tif (foo === bar) return true;\n\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\n\t\tif (ctor === Array) {\n\t\t\tif ((len=foo.length) === bar.length) {\n\t\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (!ctor || typeof foo === 'object') {\n\t\t\tlen = 0;\n\t\t\tfor (ctor in foo) {\n\t\t\t\tif (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\n\t\t\t\tif (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;\n\t\t\t}\n\t\t\treturn Object.keys(bar).length === len;\n\t\t}\n\t}\n\n\treturn foo !== foo && bar !== bar;\n}\n","import { Map, Methods } from \"./types\";\n\nlet one: Methods | undefined;\nconst all: Map<Methods> = {};\n\nexport const get = (id?: string): Methods => (id ? all[id] : (one as Methods));\n\nexport const set = (id: string | undefined, methods: Methods): void => {\n  if (id) {\n    all[id] = methods;\n  } else {\n    one = methods;\n  }\n};\n\nexport const remove = (id?: string): void => {\n  if (id) {\n    delete all[id];\n  } else {\n    one = undefined;\n  }\n};\n","import { MutableRefObject, useRef, useEffect } from \"react\";\n\nexport default <T>(val: T): MutableRefObject<T> => {\n  const ref = useRef(val);\n\n  useEffect(() => {\n    ref.current = val;\n  });\n\n  return ref;\n};\n","import { Map } from \"../types\";\n\nexport default (arr: any[]): Map =>\n  arr.reduce((obj, key) => {\n    obj[key] = true;\n    return obj;\n  }, {});\n","export default (value: unknown): value is FileList => value instanceof FileList;\n","export default (value: unknown): value is Object =>\n  value !== null && typeof value === \"object\";\n","import isFileList from \"./isFileList\";\nimport isObject from \"./isObject\";\n\nconst cloneObject = (object: unknown): any => {\n  if (object instanceof Event) throw new Error(\"Unable to clone event.\");\n\n  if (!isObject(object) || isFileList(object)) return object;\n\n  if (object instanceof Date) return new Date(object.getTime());\n\n  if (Array.isArray(object)) return object.map((val) => cloneObject(val));\n\n  return Object.keys(object).reduce((obj: Record<string, any>, key) => {\n    obj[key] = cloneObject((object as Record<string, any>)[key]);\n    return obj;\n  }, {});\n};\n\nexport default cloneObject;\n","export default (arr: any[]): any[] => arr.filter(Boolean);\n","import isObject from \"./isObject\";\n\nexport default (value: unknown): value is Object =>\n  !Array.isArray(value) && !(value instanceof Date) && isObject(value);\n","import isPlainObject from \"./isPlainObject\";\n\nconst deepMerge = (...objects: any[]): any =>\n  objects.reduce((prev, obj) => {\n    Object.keys(obj).forEach((key) => {\n      const prevValue = prev[key];\n      const currValue = obj[key];\n\n      if (Array.isArray(prevValue) && Array.isArray(currValue)) {\n        prev[key] = [...prevValue, ...currValue];\n      } else if (isPlainObject(prevValue) && isPlainObject(currValue)) {\n        prev[key] = deepMerge(prevValue, currValue);\n      } else {\n        prev[key] = currValue;\n      }\n    });\n\n    return prev;\n  }, {});\n\nexport default deepMerge;\n","export default (value: unknown): value is undefined => value === undefined;\n","import { Map } from \"../types\";\nimport isPlainObject from \"./isPlainObject\";\nimport isUndefined from \"./isUndefined\";\n\nconst filterErrors = (error: unknown, touched: unknown): any => {\n  if (!isPlainObject(error)) return touched ? error : undefined;\n\n  return Object.keys(error).reduce((obj: Map<any>, key) => {\n    const nextErrors = filterErrors(\n      (error as Map<any>)[key],\n      (touched as Map<any>)[key] || false\n    );\n\n    if (!isUndefined(nextErrors)) {\n      obj[key] = nextErrors;\n    } else {\n      delete obj[key];\n    }\n\n    return obj;\n  }, {});\n};\n\nexport default filterErrors;\n","import compact from \"./compact\";\n\nexport default (str: string): string[] => {\n  if (typeof str !== \"string\") throw new TypeError(\"Expected a string.\");\n  if (!str.length) return [];\n\n  return compact(str.split(/[.[\\]]+/));\n};\n","import isPlainObject from \"./isPlainObject\";\nimport isUndefined from \"./isUndefined\";\nimport stringToPath from \"./stringToPath\";\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport default (object: any, path: string, defaultValue?: unknown): any => {\n  if (!isPlainObject(object) || !path) return defaultValue;\n\n  const value = stringToPath(path).reduce(\n    (obj, key) => (obj || {})[key],\n    object\n  );\n\n  return !isUndefined(value) ? value : defaultValue;\n};\n","import isObject from \"./isObject\";\n\nconst getIsDirty = (dirty: object): boolean => {\n  const search = (dty: object, found: any[] = []) => {\n    for (const val of Object.values(dty)) {\n      if (val === true) {\n        found.push(val);\n        return found;\n      }\n\n      if (isObject(val)) search(val, found);\n    }\n\n    return found;\n  };\n\n  return !!search(dirty).length;\n};\n\nexport default getIsDirty;\n","export default (condition: boolean, message: string): void => {\n  if (__DEV__ && condition) throw new Error(message);\n};\n","export default (value: unknown): value is Function =>\n  typeof value === \"function\";\n","import isFunction from \"./isFunction\";\n\nexport default (value: unknown): value is Promise<any> =>\n  isFunction(value) && value.constructor.name === \"AsyncFunction\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"checkbox\";\n","import { Map } from \"../types\";\nimport isPlainObject from \"./isPlainObject\";\n\nexport default (value: unknown): value is Map<never> =>\n  isPlainObject(value) && !Object.keys(value).length;\n","import { FieldElement } from \"../types\";\n\nexport default (element: HTMLElement): element is FieldElement =>\n  /INPUT|TEXTAREA|SELECT/.test(element.tagName);\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"file\";\n","export default (element: HTMLElement): element is HTMLInputElement =>\n  element.tagName === \"INPUT\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"number\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"radio\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLInputElement =>\n  field.type === \"range\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLSelectElement =>\n  field.type === \"select-multiple\";\n","import { FieldElement } from \"../types\";\n\nexport default (field: FieldElement): field is HTMLSelectElement =>\n  field.type === \"select-one\";\n","export default (callback: (args: any) => any): any =>\n  (\n    window.requestIdleCallback ||\n    ((cb) => {\n      const start = Date.now();\n      return setTimeout(\n        () =>\n          cb({\n            didTimeout: false,\n            timeRemaining: /* istanbul ignore next */ () =>\n              Math.max(0, 50 - (Date.now() - start)),\n          }),\n        1\n      );\n    })\n  )(callback, { timeout: 2000 });\n","import cloneObject from \"./cloneObject\";\nimport isPlainObject from \"./isPlainObject\";\nimport stringToPath from \"./stringToPath\";\n\nexport default (\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  object: any,\n  path: string,\n  value: unknown,\n  immutable = false\n): any => {\n  if (!isPlainObject(object)) throw new TypeError(\"Expected an object.\");\n\n  const segs = stringToPath(path);\n  const newObject = immutable ? cloneObject(object) : object;\n\n  segs.slice(0, -1).reduce((obj, key, idx) => {\n    const nextIsNumber = !Number.isNaN(+segs[idx + 1]);\n    if (\n      (isPlainObject(obj[key]) && !nextIsNumber) ||\n      (Array.isArray(obj[key]) && nextIsNumber)\n    )\n      return obj[key];\n    obj[key] = nextIsNumber ? [] : {};\n    return obj[key];\n  }, newObject)[segs[segs.length - 1] || \"\"] = value;\n\n  return newObject;\n};\n","/* eslint-disable no-prototype-builtins */\n\nimport cloneObject from \"./cloneObject\";\nimport isEmptyObject from \"./isEmptyObject\";\nimport isPlainObject from \"./isPlainObject\";\nimport isUndefined from \"./isUndefined\";\nimport stringToPath from \"./stringToPath\";\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nconst unset = (object: any, path: string, immutable = false): any => {\n  if (!isPlainObject(object)) throw new TypeError(\"Expected an object.\");\n\n  const refObject = immutable ? cloneObject(object) : object;\n  const newObject = refObject;\n\n  if (newObject.hasOwnProperty(path)) {\n    delete newObject[path];\n    return refObject;\n  }\n\n  const segs = stringToPath(path);\n\n  if (!segs.length) return refObject;\n\n  const last = segs.pop() as string;\n  const target = segs.reduce((obj, key) => (obj || {})[key], newObject);\n\n  if (Array.isArray(target)) {\n    let index = +last;\n\n    if (index < target.length - 1) {\n      target.splice(index, 1);\n    } else {\n      while (index >= 0) {\n        // @ts-expect-error\n        if (index == last || isUndefined(target[index])) {\n          target.splice(index, 1);\n          index -= 1;\n        } else {\n          break;\n        }\n      }\n    }\n  } else if (isPlainObject(target)) {\n    delete target[last];\n  }\n\n  return isEmptyObject(target) || (Array.isArray(target) && !target.length)\n    ? unset(refObject, segs.join(\".\"))\n    : refObject;\n};\n\nexport default unset;\n","export default (...args: any[]): void => {\n  if (__DEV__) console.warn(...args);\n};\n","import { useReducer, useRef, useCallback } from \"react\";\nimport { dequal } from \"dequal/lite\";\n\nimport {\n  Debug,\n  FormState,\n  FormStateReturn,\n  Observer,\n  ObserverHandler,\n  SetStateRef,\n  SetUsedState,\n} from \"../types\";\nimport useLatest from \"./useLatest\";\nimport { get, getIsDirty, isEmptyObject, set } from \"../utils\";\n\nexport default <V>(\n  initialState: FormState<V>,\n  onChange?: Debug<V>\n): FormStateReturn<V> => {\n  const [, forceUpdate] = useReducer((c) => c + 1, 0);\n  const stateRef = useRef(initialState);\n  const stateObserversRef = useRef<Observer[]>([\n    { usedState: {}, update: forceUpdate },\n  ]);\n  const onChangeRef = useLatest(onChange || (() => undefined));\n\n  const setStateRef = useCallback<SetStateRef>(\n    (path, value, { fieldPath, shouldUpdate = true } = {}) => {\n      const key = path.split(\".\")[0];\n\n      if (!key) {\n        if (!dequal(stateRef.current, value)) {\n          stateRef.current = value;\n          onChangeRef.current(stateRef.current);\n\n          stateObserversRef.current.forEach(({ usedState, update }) => {\n            if (shouldUpdate && !isEmptyObject(usedState)) update();\n          });\n        }\n\n        return;\n      }\n\n      if (\n        (path !== \"values\" && key === \"values\") ||\n        !dequal(get(stateRef.current, path), value)\n      ) {\n        const state = set(stateRef.current, path, value, true);\n        const {\n          errors,\n          dirty,\n          isDirty: prevIsDirty,\n          isValid: prevIsValid,\n        } = state;\n        let { submitCount: prevSubmitCount } = state;\n        const isDirty = key === \"dirty\" ? getIsDirty(dirty) : prevIsDirty;\n        const isValid = key === \"errors\" ? isEmptyObject(errors) : prevIsValid;\n        const submitCount =\n          key === \"isSubmitting\" && value\n            ? (prevSubmitCount += 1)\n            : prevSubmitCount;\n\n        stateRef.current = { ...state, isDirty, isValid, submitCount };\n        onChangeRef.current(stateRef.current);\n\n        if (!shouldUpdate) return;\n\n        path = fieldPath || path;\n        stateObserversRef.current.forEach(({ usedState, update }) => {\n          if (\n            Object.keys(usedState).some(\n              (k) => path.startsWith(k) || k.startsWith(path)\n            ) ||\n            (usedState.isDirty && isDirty !== prevIsDirty) ||\n            (usedState.isValid && isValid !== prevIsValid)\n          )\n            update();\n        });\n      }\n    },\n    [onChangeRef]\n  );\n\n  const setUsedState = useCallback<SetUsedState>((usedState) => {\n    stateObserversRef.current[0].usedState = usedState;\n  }, []);\n\n  const subscribeObserver = useCallback<ObserverHandler>(\n    (observer) => stateObserversRef.current.push(observer),\n    []\n  );\n\n  const unsubscribeObserver = useCallback<ObserverHandler>((observer) => {\n    stateObserversRef.current = stateObserversRef.current.filter(\n      (o) => o !== observer\n    );\n  }, []);\n\n  return {\n    stateRef,\n    setStateRef,\n    setUsedState,\n    subscribeObserver,\n    unsubscribeObserver,\n  };\n};\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport { useCallback, useEffect, useRef } from \"react\";\nimport { dequal } from \"dequal/lite\";\n\nimport * as shared from \"./shared\";\nimport {\n  ClearErrors,\n  Field,\n  FieldElement,\n  Fields,\n  FieldValidator,\n  FormConfig,\n  FormErrors,\n  FormMethods,\n  FormState,\n  FormValues,\n  GetFormState,\n  GetNodeValue,\n  GetState,\n  HandleChangeEvent,\n  Handlers,\n  Map,\n  Parsers,\n  RegisterField,\n  RegisterForm,\n  RemoveField,\n  Reset,\n  RunValidation,\n  Select,\n  SetDefaultValue,\n  SetDirty,\n  SetError,\n  SetTouched,\n  SetTouchedMaybeValidate,\n  SetValue,\n  Submit,\n} from \"./types\";\nimport { useLatest, useState } from \"./hooks\";\nimport {\n  arrayToMap,\n  compact,\n  deepMerge,\n  filterErrors,\n  get,\n  isAsyncFunction,\n  isCheckboxInput,\n  isEmptyObject,\n  isFieldElement,\n  isFileInput,\n  isFileList,\n  isFunction,\n  isInputElement,\n  isNumberInput,\n  isPlainObject,\n  isRadioInput,\n  isRangeInput,\n  isSelectMultiple,\n  isSelectOne,\n  isUndefined,\n  runWithLowPriority,\n  set,\n  unset,\n  warn,\n} from \"./utils\";\n\nexport default <V extends FormValues = FormValues>({\n  id,\n  defaultValues = {} as V,\n  validate,\n  validateOnChange = true,\n  validateOnBlur = true,\n  builtInValidationMode = \"message\",\n  shouldRemoveField = true,\n  excludeFields = [],\n  onReset,\n  onSubmit,\n  onError,\n  debug,\n}: FormConfig<V> = {}): FormMethods<V> => {\n  const handlersRef = useRef<Handlers>({});\n  const observerRef = useRef<MutationObserver>();\n  const formRef = useRef<HTMLElement>();\n  const fieldsRef = useRef<Fields>({});\n  const fieldParsersRef = useRef<Parsers>({});\n  const controlledsRef = useRef<Map>({});\n  const excludeFieldsRef = useRef<Map>(arrayToMap(excludeFields));\n  const changedFieldRef = useRef<string>();\n  const formValidatorRef = useLatest(validate);\n  const fieldValidatorsRef = useRef<Map<FieldValidator<V>>>({});\n  const onResetRef = useLatest(onReset || (() => undefined));\n  const onSubmitRef = useLatest(onSubmit || (() => undefined));\n  const onErrorRef = useLatest(onError || (() => undefined));\n  const defaultValuesRef = useRef(defaultValues);\n  const initialStateRef = useRef<FormState<V>>({\n    values: defaultValuesRef.current,\n    touched: {},\n    errors: {},\n    isDirty: false,\n    dirty: {},\n    isValidating: false,\n    isValid: true,\n    isSubmitting: false,\n    isSubmitted: false,\n    submitCount: 0,\n  });\n  const {\n    stateRef,\n    setStateRef,\n    setUsedState,\n    subscribeObserver,\n    unsubscribeObserver,\n  } = useState<V>(initialStateRef.current, debug);\n\n  const handleUnset = useCallback(\n    (path: string) => {\n      const [t, n] = path.split(\".\");\n      setStateRef(\n        t,\n        unset(stateRef.current[t as keyof FormState<V>], n, true),\n        {\n          fieldPath: path,\n        }\n      );\n    },\n    [setStateRef, stateRef]\n  );\n\n  const getFields = useCallback(\n    (form: HTMLElement) =>\n      Array.from(form.querySelectorAll(\"input,textarea,select\"))\n        .filter((element) => {\n          const field = element as FieldElement;\n          const {\n            type,\n            name,\n            id: fieldId,\n            classList,\n            dataset: { rcfExclude },\n          } = field;\n\n          const classes = Array.from(classList);\n          const { current: exclude } = excludeFieldsRef;\n\n          if (\n            /button|image|submit|reset/.test(type) ||\n            (fieldId && exclude[`#${fieldId}`]) ||\n            classes.find((n) => exclude[`.${n}`])\n          )\n            return false;\n\n          if (rcfExclude !== \"true\" && !name) {\n            warn(\n              '💡 react-cool-form > field: Missing \"name\" attribute. Do you want to exclude the field? See: https://react-cool-form.netlify.app/docs/api-reference/use-form/#excludefields'\n            );\n            return false;\n          }\n\n          return (\n            controlledsRef.current[name] ||\n            (rcfExclude !== \"true\" && !exclude[name])\n          );\n        })\n        .reduce((acc: Fields, elm) => {\n          const field = elm as FieldElement;\n          const { name } = field;\n\n          acc[name] = { ...acc[name], field: acc[name]?.field || field };\n\n          if (isCheckboxInput(field) || isRadioInput(field)) {\n            acc[name].options = acc[name].options\n              ? [...(acc[name].options as HTMLInputElement[]), field]\n              : [field];\n          } else if (isSelectOne(field) || isSelectMultiple(field)) {\n            acc[name].options = Array.from(field.options);\n          }\n\n          return acc;\n        }, {}),\n    []\n  );\n\n  const getNodeValue = useCallback<GetNodeValue>(\n    (name, fields = fieldsRef.current) => {\n      const { field, options } = fields[name];\n      let value = field.value as any;\n\n      if (isInputElement(field)) {\n        if (fieldParsersRef.current[name]?.valueAsNumber) {\n          value = field.valueAsNumber;\n          return value;\n        }\n        if (fieldParsersRef.current[name]?.valueAsDate) {\n          value = field.valueAsDate;\n          return value;\n        }\n      }\n\n      if (isNumberInput(field) || isRangeInput(field))\n        value = field.valueAsNumber || \"\";\n\n      if (isCheckboxInput(field)) {\n        const checkboxes = options as HTMLInputElement[];\n        const checkbox = checkboxes[0];\n\n        if (checkboxes.length > 1) {\n          value = checkboxes.filter((c) => c.checked).map((c) => c.value);\n        } else if (checkbox.hasAttribute(\"value\") && checkbox.value) {\n          value = checkbox.checked ? [checkbox.value] : [];\n        } else {\n          value = checkbox.checked;\n        }\n      }\n\n      if (isRadioInput(field))\n        value =\n          (options as HTMLInputElement[]).find((radio) => radio.checked)\n            ?.value || \"\";\n\n      if (isSelectMultiple(field))\n        value = (options as HTMLOptionElement[])\n          .filter((option) => option.selected)\n          .map((option) => option.value);\n\n      if (isFileInput(field)) value = field.files;\n\n      return value;\n    },\n    []\n  );\n\n  const setNodeValue = useCallback(\n    (name: string, value: any, fields: Fields = fieldsRef.current) => {\n      if (!fields[name] || controlledsRef.current[name]) return;\n\n      const { field, options } = fields[name];\n\n      if (isCheckboxInput(field)) {\n        const checkboxes = options as HTMLInputElement[];\n\n        if (checkboxes.length > 1) {\n          checkboxes.forEach((checkbox) => {\n            checkbox.checked = Array.isArray(value)\n              ? value.includes(checkbox.value)\n              : !!value;\n          });\n        } else {\n          checkboxes[0].checked = !!value;\n        }\n      } else if (isRadioInput(field)) {\n        (options as HTMLInputElement[]).forEach((radio) => {\n          radio.checked = radio.value === value;\n        });\n      } else if (isSelectMultiple(field) && Array.isArray(value)) {\n        (options as HTMLOptionElement[]).forEach((option) => {\n          option.selected = !!value.includes(option.value);\n        });\n      } else if (isFileInput(field)) {\n        if (isFileList(value)) field.files = value;\n        if (!value) field.value = \"\";\n      } else {\n        field.value = value ?? \"\";\n      }\n    },\n    []\n  );\n\n  const setDefaultValue = useCallback<SetDefaultValue>(\n    (name, value) => {\n      initialStateRef.current = set(\n        initialStateRef.current,\n        `values.${name}`,\n        value,\n        true\n      );\n\n      setStateRef(`values.${name}`, value, { shouldUpdate: false });\n    },\n    [setStateRef]\n  );\n\n  const setNodesOrStateValue = useCallback(\n    (\n      values: V,\n      {\n        shouldUpdateDefaultValues = true,\n        fields = Object.values(fieldsRef.current),\n      }: {\n        shouldUpdateDefaultValues?: boolean;\n        fields?: Field[] | string[];\n      } = {}\n    ) =>\n      fields.forEach((field: Field | string) => {\n        const name = isPlainObject(field) ? (field as Field).field.name : field;\n\n        if (controlledsRef.current[name]) return;\n\n        let value = get(values, name);\n\n        if (!isUndefined(value)) setNodeValue(name, value);\n\n        if (shouldUpdateDefaultValues) {\n          value = get(defaultValuesRef.current, name);\n\n          setDefaultValue(\n            name,\n            !isUndefined(value) ? value : getNodeValue(name)\n          );\n        }\n      }),\n    [getNodeValue, setDefaultValue, setNodeValue]\n  );\n\n  const getFormState = useCallback<GetFormState<V>>(\n    (\n      path,\n      {\n        target,\n        errorWithTouched,\n        defaultValues: dfValues = {},\n        methodName = \"select\",\n        callback,\n      }\n    ) => {\n      if (!path) return callback ? undefined : stateRef.current;\n\n      const usedState: Map = {};\n      const getPath = (p: string) => {\n        p = target ? `${target}.${p}` : p;\n\n        if (callback) {\n          if (p === \"values\")\n            warn(\n              `💡 react-cool-form > ${methodName}: Getting \"values\" alone might cause unnecessary re-renders. If you know what you're doing, please ignore this warning. See: https://react-cool-form.netlify.app/docs/getting-started/form-state#best-practices`\n            );\n\n          usedState[p] = true;\n        }\n\n        return p;\n      };\n      const helper = (p: string, state: any) => {\n        if (p.startsWith(\"values\")) {\n          if (!isUndefined(state)) return state;\n\n          p = p.replace(\"values.\", \"\");\n          state = get(defaultValuesRef.current, p);\n\n          return !isUndefined(state) ? state : get(dfValues, p);\n        }\n\n        if (\n          !errorWithTouched ||\n          !p.startsWith(\"errors\") ||\n          !state ||\n          isEmptyObject(state)\n        )\n          return state;\n\n        p = p.replace(\"errors\", \"touched\");\n        usedState[p] = true;\n\n        return filterErrors(state, get(stateRef.current, p));\n      };\n      let state;\n\n      if (Array.isArray(path)) {\n        state = path.map((p) => {\n          p = getPath(p);\n          return helper(p, get(stateRef.current, p));\n        });\n      } else if (isPlainObject(path)) {\n        const paths = path as Map<string>;\n        state = Object.keys(paths).reduce((s: Map<any>, key) => {\n          path = getPath(paths[key]);\n          s[key] = helper(path, get(stateRef.current, path));\n          return s;\n        }, {});\n      } else {\n        path = getPath(path);\n        state = helper(path, get(stateRef.current, path));\n      }\n\n      if (callback) callback(usedState);\n\n      return state;\n    },\n    [stateRef]\n  );\n\n  const select = useCallback<Select<V>>(\n    (path, { target, errorWithTouched, defaultValues: dfValues } = {}) =>\n      getFormState(path, {\n        target,\n        errorWithTouched,\n        defaultValues: dfValues,\n        callback: (usedState) => setUsedState(usedState),\n      }),\n    [getFormState, setUsedState]\n  );\n\n  const getState = useCallback<GetState>(\n    (path, target) => getFormState(path, { target }),\n    [getFormState]\n  );\n\n  const setError = useCallback<SetError>(\n    (name, error) => {\n      error = isFunction(error)\n        ? error(get(stateRef.current.errors, name))\n        : error;\n\n      if (error) {\n        setStateRef(`errors.${name}`, error);\n      } else {\n        handleUnset(`errors.${name}`);\n      }\n    },\n    [handleUnset, setStateRef, stateRef]\n  );\n\n  const clearErrors = useCallback<ClearErrors>(\n    (name) => {\n      if (!name) {\n        setStateRef(\"errors\", {});\n      } else if (Array.isArray(name)) {\n        name.forEach((n) => setError(n));\n      } else {\n        setError(name);\n      }\n    },\n    [setError, setStateRef]\n  );\n\n  const runBuiltInValidation = useCallback(\n    (name: string) => {\n      if (builtInValidationMode === false || !fieldsRef.current[name])\n        return undefined;\n\n      const { field } = fieldsRef.current[name];\n\n      if (builtInValidationMode === \"message\") return field.validationMessage;\n\n      for (const k in field.validity) // @ts-expect-error\n        if (k !== \"valid\" && field.validity[k]) return k;\n\n      return undefined;\n    },\n    [builtInValidationMode]\n  );\n\n  const runAllBuiltInValidation = useCallback(() => {\n    if (builtInValidationMode === false) return {};\n\n    return Object.keys(fieldsRef.current).reduce((errors, name) => {\n      const error = runBuiltInValidation(name);\n      errors = { ...errors, ...(error ? set({}, name, error) : {}) };\n      return errors;\n    }, {});\n  }, [builtInValidationMode, runBuiltInValidation]);\n\n  const runFieldValidation = useCallback(\n    async (name: string): Promise<any> => {\n      if (!fieldValidatorsRef.current[name]) return undefined;\n\n      try {\n        const error = await fieldValidatorsRef.current[name](\n          get(stateRef.current.values, name),\n          stateRef.current.values\n        );\n\n        return error;\n      } catch (exception) {\n        warn(`💡 react-cool-form > validate ${name}: `, exception);\n        throw exception;\n      }\n    },\n    [stateRef]\n  );\n\n  const runAllFieldsValidation = useCallback((): Promise<FormErrors<V>> => {\n    const promises = Object.keys(fieldValidatorsRef.current).map((name) =>\n      runFieldValidation(name)\n    );\n\n    return Promise.all(promises).then((errors) =>\n      Object.keys(fieldValidatorsRef.current).reduce((acc, cur, idx) => {\n        acc = { ...acc, ...(errors[idx] ? set({}, cur, errors[idx]) : {}) };\n        return acc;\n      }, {})\n    );\n  }, [runFieldValidation]);\n\n  const runFormValidation = useCallback(\n    async (name?: string): Promise<any> => {\n      if (!formValidatorRef.current) return name ? undefined : {};\n\n      try {\n        const errors = await formValidatorRef.current(stateRef.current.values);\n\n        if (name) return get(errors, name);\n\n        return isPlainObject(errors) ? errors : {};\n      } catch (exception) {\n        warn(`💡 react-cool-form > validate form: `, exception);\n        throw exception;\n      }\n    },\n    [formValidatorRef, stateRef]\n  );\n\n  const validateField = useCallback(\n    async (name: string) => {\n      const hasAsyncValidator =\n        isAsyncFunction(formValidatorRef.current) ||\n        isAsyncFunction(fieldValidatorsRef.current[name]);\n\n      if (hasAsyncValidator) setStateRef(\"isValidating\", true);\n\n      try {\n        const error =\n          (await runFormValidation(name)) ||\n          (await runFieldValidation(name)) ||\n          runBuiltInValidation(name);\n\n        setError(name, error);\n        if (hasAsyncValidator) setStateRef(\"isValidating\", false);\n\n        return error;\n      } catch (exception) {\n        return exception;\n      }\n    },\n    [\n      formValidatorRef,\n      runBuiltInValidation,\n      runFieldValidation,\n      runFormValidation,\n      setError,\n      setStateRef,\n    ]\n  );\n\n  const validateFieldWithLowPriority = useCallback<typeof validateField>(\n    (name) => runWithLowPriority(() => validateField(name)),\n    [validateField]\n  );\n\n  const validateForm = useCallback((): Promise<FormErrors<V>> => {\n    setStateRef(\"isValidating\", true);\n\n    return Promise.all([\n      runAllBuiltInValidation(),\n      runAllFieldsValidation(),\n      runFormValidation(),\n    ]).then((errors) => {\n      const errs = deepMerge(...errors);\n\n      setStateRef(\"errors\", errs);\n      setStateRef(\"isValidating\", false);\n\n      return errs;\n    });\n  }, [\n    runAllBuiltInValidation,\n    runAllFieldsValidation,\n    runFormValidation,\n    setStateRef,\n  ]);\n\n  const runValidation = useCallback<RunValidation>(\n    (name) => {\n      if (!name) return validateForm().then((errors) => isEmptyObject(errors));\n\n      if (Array.isArray(name))\n        return Promise.all(name.map((n) => validateField(n))).then(\n          (errors) => !compact(errors).length\n        );\n\n      return validateField(name).then((error) => !error);\n    },\n    [validateField, validateForm]\n  );\n\n  const setTouched = useCallback<SetTouched>(\n    (name, isTouched = true, shouldValidate = validateOnBlur) => {\n      if (isTouched) {\n        setStateRef(`touched.${name}`, true);\n      } else {\n        handleUnset(`touched.${name}`);\n      }\n\n      if (shouldValidate) validateFieldWithLowPriority(name);\n    },\n    [handleUnset, setStateRef, validateFieldWithLowPriority, validateOnBlur]\n  );\n\n  const setTouchedMaybeValidate = useCallback<SetTouchedMaybeValidate>(\n    (name) =>\n      setTouched(\n        name,\n        true,\n        validateOnChange ? name !== changedFieldRef.current : undefined\n      ),\n    [setTouched, validateOnChange]\n  );\n\n  const setDirty = useCallback<SetDirty>(\n    (name, isDirty = true) => {\n      if (isDirty) {\n        setStateRef(`dirty.${name}`, true);\n      } else {\n        handleUnset(`dirty.${name}`);\n      }\n    },\n    [handleUnset, setStateRef]\n  );\n\n  const setDirtyIfNeeded = useCallback(\n    (name: string) =>\n      setDirty(\n        name,\n        !dequal(\n          get(stateRef.current.values, name),\n          get(initialStateRef.current.values, name)\n        )\n      ),\n    [setDirty, stateRef]\n  );\n\n  const setValue = useCallback<SetValue>(\n    (\n      name,\n      value,\n      {\n        shouldValidate = validateOnChange,\n        shouldTouched = true,\n        shouldDirty = true,\n      } = {}\n    ) => {\n      value = isFunction(value)\n        ? value(get(stateRef.current.values, name))\n        : value;\n\n      if (!isUndefined(value)) {\n        setStateRef(`values.${name}`, value);\n      } else {\n        handleUnset(`values.${name}`);\n      }\n      setNodeValue(name, value);\n\n      if (shouldTouched) setTouched(name, true, false);\n      if (shouldDirty) setDirtyIfNeeded(name);\n      if (shouldValidate) validateFieldWithLowPriority(name);\n    },\n    [\n      handleUnset,\n      setDirtyIfNeeded,\n      setNodeValue,\n      setStateRef,\n      setTouched,\n      stateRef,\n      validateFieldWithLowPriority,\n      validateOnChange,\n    ]\n  );\n\n  const getOptions = useCallback(\n    () => ({\n      getState,\n      setValue,\n      setTouched,\n      setDirty,\n      setError,\n      clearErrors,\n      runValidation,\n      reset,\n      submit,\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const reset: Reset<V> = useCallback(\n    (values, exclude, e) => {\n      if (e?.preventDefault) e.preventDefault();\n      if (e?.stopPropagation) e.stopPropagation();\n\n      const state = { ...stateRef.current };\n      const skip = arrayToMap(exclude || []);\n\n      Object.keys(state).forEach((key) => {\n        if (skip[key]) return;\n\n        if (key === \"values\") {\n          const nextValues =\n            (isFunction(values) ? values(stateRef.current.values) : values) ||\n            initialStateRef.current.values;\n\n          state[key] = nextValues;\n          initialStateRef.current = set(\n            initialStateRef.current,\n            \"values\",\n            nextValues,\n            true\n          );\n          setNodesOrStateValue(nextValues, {\n            shouldUpdateDefaultValues: false,\n          });\n        } else {\n          // @ts-expect-error\n          state[key] = initialStateRef.current[key];\n        }\n      });\n\n      setStateRef(\"\", state);\n      onResetRef.current(state.values, getOptions(), e);\n    },\n    [getOptions, onResetRef, setNodesOrStateValue, setStateRef, stateRef]\n  );\n\n  const submit: Submit<V> = useCallback(\n    async (e) => {\n      if (e?.preventDefault) e.preventDefault();\n      if (e?.stopPropagation) e.stopPropagation();\n\n      const nextTouched = Object.keys({\n        ...fieldsRef.current,\n        ...controlledsRef.current,\n      }).reduce((touched, name) => {\n        touched = set(touched, name, true, true);\n        return touched;\n      }, stateRef.current.touched);\n\n      setStateRef(\"touched\", nextTouched);\n      setStateRef(\"isSubmitting\", true);\n\n      try {\n        const errors = await validateForm();\n\n        if (!isEmptyObject(errors)) {\n          onErrorRef.current(errors, getOptions(), e);\n\n          return { errors };\n        }\n\n        await onSubmitRef.current(stateRef.current.values, getOptions(), e);\n        setStateRef(\"isSubmitted\", true);\n\n        return { values: stateRef.current.values };\n      } catch (exception) {\n        warn(`💡 react-cool-form > submit: `, exception);\n        throw exception;\n      } finally {\n        setStateRef(\"isSubmitting\", false);\n      }\n    },\n    [getOptions, onErrorRef, onSubmitRef, setStateRef, stateRef, validateForm]\n  );\n\n  const handleChangeEvent = useCallback<HandleChangeEvent>(\n    (name, value) => {\n      setStateRef(`values.${name}`, value);\n      setDirtyIfNeeded(name);\n\n      if (validateOnChange) validateFieldWithLowPriority(name);\n    },\n    [\n      setDirtyIfNeeded,\n      setStateRef,\n      validateFieldWithLowPriority,\n      validateOnChange,\n    ]\n  );\n\n  const removeField = useCallback<RemoveField>(\n    (name) => {\n      handleUnset(`values.${name}`);\n      handleUnset(`touched.${name}`);\n      handleUnset(`dirty.${name}`);\n      handleUnset(`errors.${name}`);\n\n      initialStateRef.current = unset(\n        initialStateRef.current,\n        `values.${name}`,\n        true\n      );\n\n      delete fieldParsersRef.current[name];\n      delete fieldValidatorsRef.current[name];\n      delete controlledsRef.current[name];\n    },\n    [handleUnset]\n  );\n\n  const registerForm = useCallback<RegisterForm>(\n    (el) => {\n      if (!el) return;\n\n      formRef.current = el;\n      const form = formRef.current;\n\n      fieldsRef.current = getFields(form);\n      setNodesOrStateValue(initialStateRef.current.values);\n\n      handlersRef.current.change = ({ target }: Event) => {\n        const { name } = target as FieldElement;\n\n        if (!name) {\n          warn('💡 react-cool-form > field: Missing \"name\" attribute.');\n          return;\n        }\n\n        if (fieldsRef.current[name] && !controlledsRef.current[name]) {\n          const parse = fieldParsersRef.current[name]?.parse;\n          const value = getNodeValue(name);\n\n          handleChangeEvent(name, parse ? parse(value) : value);\n          changedFieldRef.current = name;\n        }\n      };\n\n      handlersRef.current.blur = ({ target }: Event) => {\n        if (!isFieldElement(target as HTMLElement)) return;\n\n        const { name } = target as FieldElement;\n\n        if (fieldsRef.current[name] && !controlledsRef.current[name]) {\n          setTouchedMaybeValidate(name);\n          changedFieldRef.current = undefined;\n        }\n      };\n\n      handlersRef.current.submit = (e: Event) => submit(e as any);\n\n      handlersRef.current.reset = (e: Event) => reset(null, null, e as any);\n\n      form.addEventListener(\"input\", handlersRef.current.change);\n      form.addEventListener(\"focusout\", handlersRef.current.blur);\n      form.addEventListener(\"submit\", handlersRef.current.submit);\n      form.addEventListener(\"reset\", handlersRef.current.reset);\n\n      observerRef.current = new MutationObserver(([{ type }]) => {\n        if (type !== \"childList\") return;\n\n        const fields = getFields(form);\n\n        if (shouldRemoveField)\n          Object.keys(fieldsRef.current).forEach((name) => {\n            if (controlledsRef.current[name]) return;\n\n            if (!fields[name]) {\n              removeField(name);\n              return;\n            }\n\n            const currOptions = fieldsRef.current[name].options\n              ?.length as number;\n            const nextOptions = fields[name].options?.length as number;\n\n            if (currOptions > nextOptions) {\n              setStateRef(`values.${name}`, getNodeValue(name, fields), {\n                shouldUpdate: false,\n              });\n            } else if (currOptions < nextOptions) {\n              setNodeValue(\n                name,\n                get(initialStateRef.current.values, name),\n                fields\n              );\n            }\n          });\n\n        let values = defaultValuesRef.current;\n        const addedNodes: string[] = [];\n\n        Object.keys(fields).forEach((name) => {\n          if (fieldsRef.current[name] || controlledsRef.current[name]) return;\n\n          const value = get(stateRef.current.values, name);\n          if (!isUndefined(value)) values = set(values, name, value, true);\n\n          addedNodes.push(name);\n        });\n\n        fieldsRef.current = fields;\n        if (addedNodes.length)\n          setNodesOrStateValue(values, { fields: addedNodes });\n      });\n\n      observerRef.current.observe(form, { childList: true, subtree: true });\n    },\n    [\n      getFields,\n      getNodeValue,\n      handleChangeEvent,\n      removeField,\n      reset,\n      setNodeValue,\n      setNodesOrStateValue,\n      setStateRef,\n      setTouchedMaybeValidate,\n      shouldRemoveField,\n      stateRef,\n      submit,\n    ]\n  );\n\n  const registerField = useCallback<RegisterField<V>>(\n    (validateOrOptions) => (field) => {\n      if (\n        !field?.name ||\n        controlledsRef.current[field.name] ||\n        excludeFieldsRef.current[field.name]\n      )\n        return;\n\n      if (isFunction(validateOrOptions)) {\n        fieldValidatorsRef.current[field.name] = validateOrOptions;\n        return;\n      }\n\n      const { validate: validator, ...parsers } = validateOrOptions;\n\n      if (validator) fieldValidatorsRef.current[field.name] = validator;\n      fieldParsersRef.current[field.name] = parsers;\n    },\n    []\n  );\n\n  shared.set(id, {\n    shouldRemoveField,\n    defaultValuesRef,\n    initialStateRef,\n    controlledsRef,\n    fieldValidatorsRef,\n    changedFieldRef,\n    excludeFieldsRef,\n    getNodeValue,\n    getFormState,\n    setDefaultValue,\n    setTouchedMaybeValidate,\n    handleChangeEvent,\n    removeField,\n    subscribeObserver,\n    unsubscribeObserver,\n    form: registerForm,\n    field: registerField,\n    select,\n    getState,\n    setValue,\n    setTouched,\n    setDirty,\n    setError,\n    clearErrors,\n    runValidation,\n    reset,\n    submit,\n  });\n\n  useEffect(\n    () => () => {\n      if (formRef.current) {\n        const handlers = handlersRef.current as Required<Handlers>;\n\n        formRef.current.removeEventListener(\"input\", handlers.change);\n        formRef.current.removeEventListener(\"focusout\", handlers.blur);\n        formRef.current.removeEventListener(\"submit\", handlers.submit);\n        formRef.current.removeEventListener(\"reset\", handlers.reset);\n        observerRef.current?.disconnect();\n      }\n\n      shared.remove(id);\n    },\n    [id]\n  );\n\n  return {\n    form: registerForm,\n    field: registerField,\n    select,\n    getState,\n    setValue,\n    setTouched,\n    setDirty,\n    setError,\n    clearErrors,\n    runValidation,\n    reset,\n    submit,\n  };\n};\n","import { FormMethods, FormValues } from \"./types\";\nimport { get } from \"./shared\";\nimport { invariant } from \"./utils\";\n\nexport default <V extends FormValues = FormValues>(\n  formId?: string\n): FormMethods<V> => {\n  const methods = get(formId);\n\n  invariant(\n    !methods,\n    '💡 react-cool-form > useFormMethods: You must provide the corresponding ID to \"useForm\" hook. See: https://react-cool-form.netlify.app/docs/api-reference/use-form#id'\n  );\n\n  const {\n    form,\n    field,\n    select,\n    getState,\n    setValue,\n    setTouched,\n    setDirty,\n    setError,\n    clearErrors,\n    runValidation,\n    reset,\n    submit,\n  } = methods;\n\n  return {\n    form,\n    field,\n    select,\n    getState,\n    setValue,\n    setTouched,\n    setDirty,\n    setError,\n    clearErrors,\n    runValidation,\n    reset,\n    submit,\n  };\n};\n","/* eslint-disable react-hooks/rules-of-hooks */\n\nimport { useEffect, useReducer, useRef } from \"react\";\n\nimport { FormStateConfig, FormValues, Observer, Path } from \"./types\";\nimport { get } from \"./shared\";\nimport { invariant } from \"./utils\";\n\nexport default <V extends FormValues = FormValues>(\n  path: Path,\n  { formId, ...rest }: FormStateConfig<V> = {}\n): any => {\n  const methods = get(formId);\n  const methodName = \"useFormState\";\n\n  invariant(\n    !methods,\n    `💡 react-cool-form > ${methodName}: You must provide the corresponding ID to \"useForm\" hook. See: https://react-cool-form.netlify.app/docs/api-reference/use-form#id`\n  );\n\n  const observerRef = useRef<Observer>();\n  const [, forceUpdate] = useReducer((c) => c + 1, 0);\n  const { getFormState, subscribeObserver, unsubscribeObserver } = methods;\n\n  useEffect(() => {\n    // @ts-expect-error\n    subscribeObserver(observerRef.current);\n\n    // @ts-expect-error\n    return () => unsubscribeObserver(observerRef.current);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return getFormState(path, {\n    ...rest,\n    methodName,\n    callback: (usedState) => {\n      if (!observerRef.current)\n        observerRef.current = { usedState, update: forceUpdate };\n    },\n  });\n};\n","import { useEffect, useRef } from \"react\";\n\nimport { ControlledConfig, ControlledReturn, FormValues } from \"./types\";\nimport * as shared from \"./shared\";\nimport { get, invariant, isFieldElement, isUndefined, warn } from \"./utils\";\nimport useFormState from \"./useFormState\";\n\nexport default <V extends FormValues = FormValues>(\n  name: string,\n  {\n    formId,\n    defaultValue,\n    validate,\n    parse,\n    format,\n    errorWithTouched,\n    ...props\n  }: ControlledConfig<V> = {}\n): ControlledReturn => {\n  invariant(\n    !name,\n    '💡 react-cool-form > useControlled: Missing \"name\" parameter.'\n  );\n\n  const methods = shared.get(formId);\n\n  invariant(\n    !methods,\n    '💡 react-cool-form > useControlled: You must provide the corresponding ID to \"useForm\" hook. See: https://react-cool-form.netlify.app/docs/api-reference/use-form#id'\n  );\n\n  const hasWarn = useRef(false);\n  const meta = useFormState(\n    {\n      value: `values.${name}`,\n      error: `errors.${name}`,\n      isTouched: `touched.${name}`,\n      isDirty: `dirty.${name}`,\n    },\n    { formId, errorWithTouched }\n  );\n  const {\n    shouldRemoveField,\n    defaultValuesRef,\n    initialStateRef,\n    controlledsRef,\n    fieldValidatorsRef,\n    changedFieldRef,\n    getNodeValue,\n    setDefaultValue,\n    setTouchedMaybeValidate,\n    handleChangeEvent,\n    removeField,\n  } = methods;\n\n  useEffect(\n    () => () => {\n      if (shouldRemoveField) removeField(name);\n    },\n    [name, removeField, shouldRemoveField]\n  );\n\n  controlledsRef.current[name] = true;\n  if (validate) fieldValidatorsRef.current[name] = validate;\n\n  let value;\n\n  if (isUndefined(get(initialStateRef.current.values, name))) {\n    value = get(defaultValuesRef.current, name);\n    value = !isUndefined(value) ? value : defaultValue;\n\n    if (!isUndefined(value)) {\n      setDefaultValue(name, value);\n    } else if (!hasWarn.current) {\n      warn(\n        `💡 react-cool-form > useControlled: Please provide a default value for \"${name}\" field.`\n      );\n      hasWarn.current = true;\n    }\n  }\n\n  value = !isUndefined(meta.value) ? meta.value : value;\n  value = (format ? format(value) : value) ?? \"\";\n  const { onChange, onBlur, ...restProps } = props;\n\n  return [\n    {\n      name,\n      value,\n      onChange: (...event) => {\n        let val;\n\n        if (parse) {\n          val = parse(...event);\n        } else {\n          const e = event[0];\n          val =\n            e?.nativeEvent instanceof Event && isFieldElement(e.target)\n              ? getNodeValue(name)\n              : e;\n        }\n\n        handleChangeEvent(name, val);\n        if (onChange) onChange(...event);\n        changedFieldRef.current = name;\n      },\n      onBlur: (e) => {\n        setTouchedMaybeValidate(name);\n        if (onBlur) onBlur(e);\n        changedFieldRef.current = undefined;\n      },\n      ...restProps,\n    },\n    { error: meta.error, isTouched: !!meta.isTouched, isDirty: !!meta.isDirty },\n  ];\n};\n"],"names":["one","all","get","id","set","methods","remove","undefined","val","ref","useRef","useEffect","current","arr","reduce","obj","key","value","FileList","cloneObject","object","Event","Error","isObject","isFileList","Date","getTime","Array","isArray","map","Object","keys","filter","Boolean","deepMerge","objects","prev","forEach","prevValue","currValue","isPlainObject","filterErrors","error","touched","nextErrors","isUndefined","str","TypeError","length","compact","split","path","defaultValue","stringToPath","getIsDirty","dirty","search","dty","found","values","push","condition","message","__DEV__","isFunction","constructor","name","field","type","element","test","tagName","callback","window","requestIdleCallback","cb","start","now","setTimeout","didTimeout","timeRemaining","Math","max","timeout","immutable","segs","newObject","slice","idx","nextIsNumber","Number","isNaN","unset","refObject","hasOwnProperty","last","pop","target","index","splice","isEmptyObject","join","console","warn","initialState","onChange","useReducer","c","forceUpdate","stateRef","stateObserversRef","usedState","update","onChangeRef","useLatest","setStateRef","useCallback","fieldPath","shouldUpdate","dequal","state","errors","prevIsDirty","isDirty","prevIsValid","isValid","prevSubmitCount","submitCount","some","k","startsWith","setUsedState","subscribeObserver","observer","unsubscribeObserver","o","defaultValues","validate","validateOnChange","validateOnBlur","builtInValidationMode","shouldRemoveField","excludeFields","onReset","onSubmit","onError","debug","handlersRef","observerRef","formRef","fieldsRef","fieldParsersRef","controlledsRef","excludeFieldsRef","arrayToMap","changedFieldRef","formValidatorRef","fieldValidatorsRef","onResetRef","onSubmitRef","onErrorRef","defaultValuesRef","initialStateRef","isValidating","isSubmitting","isSubmitted","useState","handleUnset","t","n","getFields","form","from","querySelectorAll","fieldId","classList","rcfExclude","dataset","classes","exclude","find","acc","elm","isCheckboxInput","isRadioInput","options","isSelectOne","isSelectMultiple","getNodeValue","fields","isInputElement","valueAsNumber","valueAsDate","isNumberInput","isRangeInput","checkboxes","checkbox","checked","hasAttribute","radio","option","selected","isFileInput","files","setNodeValue","includes","setDefaultValue","setNodesOrStateValue","shouldUpdateDefaultValues","getFormState","errorWithTouched","dfValues","methodName","getPath","p","helper","replace","paths","s","select","getState","setError","clearErrors","runBuiltInValidation","validationMessage","validity","runAllBuiltInValidation","runFieldValidation","exception","runAllFieldsValidation","promises","Promise","then","cur","runFormValidation","validateField","hasAsyncValidator","isAsyncFunction","validateFieldWithLowPriority","runWithLowPriority","validateForm","errs","runValidation","setTouched","isTouched","shouldValidate","setTouchedMaybeValidate","setDirty","setDirtyIfNeeded","setValue","shouldTouched","shouldDirty","getOptions","reset","submit","e","preventDefault","stopPropagation","skip","nextValues","nextTouched","handleChangeEvent","removeField","registerForm","el","change","parse","blur","isFieldElement","addEventListener","MutationObserver","currOptions","nextOptions","addedNodes","observe","childList","subtree","registerField","validateOrOptions","validator","parsers","shared","handlers","removeEventListener","disconnect","formId","invariant","rest","format","props","hasWarn","meta","useFormState","onBlur","restProps","nativeEvent"],"mappings":"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"}